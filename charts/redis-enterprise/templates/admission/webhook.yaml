apiVersion: admissionregistration.k8s.io/v1
kind: ValidatingWebhookConfiguration
metadata:
  name: redb-admission
  labels:
    app: redis-enterprise
webhooks:
- name: redb.admission.redislabs
  failurePolicy: Fail
  matchPolicy: Exact
  sideEffects: None
  timeoutSeconds: 30
  rules:
  - apiGroups:   ["app.redislabs.com"]
    apiVersions: ["v1alpha1"]
    operations:  ["*"]
    resources:   ["redisenterprisedatabases"]
  clientConfig:
    service:
      namespace: default
      name: admission
      path: /admission
    caBundle: "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURkRENDQWx5Z0F3SUJBZ0lSQUlBVkJ6Tk90dmJoSjJsbEJtYVIrMlV3RFFZSktvWklodmNOQVFFTEJRQXcKUGpFa01DSUdBMVVFQ2hNYlVtVmthWE5NWVdKeklFRmtiV2x6YzJsdmJpQkRiMjUwY205c01SWXdGQVlEVlFRRApFdzFoWkcxcGMzTnBiMjR0ZEd4ek1CNFhEVEl6TURNeU1ERXpOVGcxTkZvWERUSTRNRE14T0RFek5UZzFORm93ClBqRWtNQ0lHQTFVRUNoTWJVbVZrYVhOTVlXSnpJRUZrYldsemMybHZiaUJEYjI1MGNtOXNNUll3RkFZRFZRUUQKRXcxaFpHMXBjM05wYjI0dGRHeHpNSUlCSWpBTkJna3Foa2lHOXcwQkFRRUZBQU9DQVE4QU1JSUJDZ0tDQVFFQQp3TW02YzRyMkFLQ2RVNlJNS2EzY1hQMWxCMzFyY0l0SGU3Z3FJOS9CdURwcVFpZ2VDWlEvcVpaRzk3b01DQzF4ClFqdi9WaUxnOHAzbEJTL2VXTXJaM01hdlEvc00yK0J6cGIxNGF0dUQzVEkxdEQyOHNUSCtpVkRLSWlkbFhYUUIKWi9NMkx0aTBFVHRYaEhRaDIvZnE3dHBvcmdRTDcyRnMzMnRsdCsvK1ovYk1YSk5CWlU5d0JGSXRiQndJb215cQp6MTZueVN0SlIyaStFZFJrc1VWMlFIbTQyaDVXMVBpb0V6ejRTVVVmTU56TzhuSkh0bnRZU3ozNzV1NWlDS3BuCmpCeUs5MWhrbVhnRFI4OVpRRHhGeWxDTjRIQVFtdUwwNi9nZ0ZVUG04amJXZVBudjF1VWdFNEZmSzZndEdOS3gKWmtaY2ZMcFZWaFJiYktkS1R6TFdld0lEQVFBQm8yMHdhekJwQmdOVkhSRUVZakJnZ2dsaFpHMXBjM05wYjI2QwpJMkZrYldsemMybHZiaTVrWldaaGRXeDBMbk4yWXk1amJIVnpkR1Z5TG14dlkyRnNnaFZoWkcxcGMzTnBiMjR1ClpHVm1ZWFZzZEM1emRtT0NFV0ZrYldsemMybHZiaTVrWldaaGRXeDBod1FLQkFKRk1BMEdDU3FHU0liM0RRRUIKQ3dVQUE0SUJBUUJvNy9xT3h0N3c1bnE2Ti9UQ1dwSXNQMEhKMWFldzg1R1l4VzdMMFY3ZnptYm55TG5DaGU0UgpVa2ZYZlNuSXgyRkRma1k5VG5rWTByMllqZkFYTHVTZjBtOTVsNWZyRTBYUFVDZThaZ3FONCt5ZFhUVDd2TzdOCjhpTjFwRmRwQW1ORm5VWkVKOXBkZEhUeUUwdHloSzlmNlVOUjFQNGhrSFFSaFVMM1NsLzNvVklLbkRxMFk1b2gKUThWRnpvcFBEMkJnL1NFNkZqOFVoc1dEQklqR1FYNUpGM3BidnNTQklIVEVnWnRFTmh3dXhET3RPeHQxVTd5eQpCWVZVZjd4NFRZcHIvVk9vVW04T1kzT01XSVhsU2Q1VXZDdVBGd1lVQjRhVUQyeUswaFhGTkZkdVJ4dUdPK1lLCmllR2RDUjNoNlJhUXJCUzZWL3NwNllTMzFBcEkzeWlBCi0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K" # Fill in with BASE64 encoded signed cert
  admissionReviewVersions: ["v1beta1"]
